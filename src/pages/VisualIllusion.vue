<template>
    <b-container class="mt-4">
        <b-row align-content="center" align-h="center" align-v="center">
            <h1 class="mt-4">Scanimation</h1>
        </b-row>
        <b-row align-content="center" align-h="center" align-v="center">
            <b-col>
            <b-img thumbnail src="https://i.pinimg.com/originals/e1/1e/a2/e11ea206d25d6a1f1bd1b76fbdedcbe9.gif" class="mt-4"/>
            </b-col>
            <b-col>
                <b-img thumbnail src="https://i.pinimg.com/originals/71/d3/56/71d356f86a3e680de19975653d56308c.gif" class="mt-4"/>
            </b-col>
        </b-row>
        <b-row>
            <h2 class="mt-4">Introduction</h2>
        </b-row>
        <b-row align-h="start" align-v="start">
            <p class="text-justify">Scanimation is a type of barrier-grid animation which is an effect created by moving a striped transparent overlay across an interlaced image.
            It is also known as kinegram which comes from "kine-" meaning "moving" and "-gram" meaning "drawing". This technique originated in the late 1890s, overlapping with the development of parallax stereography (Reliephographie) for 3D autostereograms. The technique has also been used for color-changing pictures, but to a much lesser extent.
            The objective of this workshop is to illustrate how to use this principle to generate apparently moving images from a set of frames selected by the user.</p>
        </b-row>
        <b-row>
            <h2 class="mt-4">Literature review</h2>
        </b-row>
        <b-row>
            <b-col>
                <br/>
                <ul>
                    <li>Motograph</li>
                    <p>On march 14, 1896 W. Symons received a patent for a technique that was used in the oldest known publication that used the principle of generating motion in pictures by interpolating colors using a grid and the image. The pictures feature different hatching patterns, causing moiré type effects when the striped transparency is moved across it. It creates a vibrant type of motion illusion with revolving wheels, billowing smoke, ripples in water, etc.</p>
                    <b-col>
                        <b-img thumbnail src="http://tile.loc.gov/storage-services/service/pnp/ppmsca/05900/05954/05954v.jpg" class="mt-4"/>
                    </b-col>
                    <br>
                    <li>Auguste Berthier's autostereograms</li>
                    <p>In May 1896 Auguste Berthier published an article describing his method of creating an autostereogram. Alternating strips from the left and right image of a traditional stereoscopic negative had to be recomposed as an interlaced image, preferably during the printing of the image on paper. A glass plate with opaque lines had to be fixed in front of the interlaced print with a few millimeters in between, so the lines on the screen formed a parallax barrier: from the right distance and angle each eye could only see the photographic strips shot from the corresponding angle.</p>
                    <b-col>
                        <b-img thumbnail src="https://jiupinjia.github.io/neuralmagiceye/rst.jpg" class="mt-4"/>
                    </b-col>
                    <br>
                    <li>Frederic Ives' parallax stereogram <span>&#38;</span> changeable picture</li>
                    <p>On December 5, 1901 American inventor Frederic Eugene Ives presented his "parallax stereogram" at the Franklin Institute of the State of Pennsylvania. The "parallax stereogram" was a photo shot through two apertures behind the lens with a "transparent-line screen, consisting of opaque lines with clear spaces between them" in front of the sensitive plate, slightly separated from it. The line screen had 200 parallel lines per inch (79/cm) and was contact-printed from an original factory halftone screen. The technique received U.S. patent on April 14, 1903</p>
                    <b-col>
                        <b-img thumbnail src="https://www.researchgate.net/profile/Lois-Mignard-Debise/publication/324525451/figure/fig4/AS:615507233353733@1523759768125/Patent-sketch-for-the-parallax-stereogram-making-camera-from-Ives-1903.png" class="mt-4"/>
                    </b-col>
                    <br>
                    <li>Eugene Estanave's animated autostereograms</li>
                    <p>French mathematician Eugène Estanave investigated the parallax stereogram and started working with the technique late in 1905. On January 24, 1906, Estanave filed for French patent for a stereophotography device and stereoscopy using line sheets. It included his "changing" pictures that applied the principle of Ives' "Changeable sign" to animated photography, for instance the portrait of a woman with eyes open or closed depending on the viewing angle.</p>
                    <li>Magic moving picture cards</li>
                    <p>Magic moving pictures were composed of images containing black vertical and regularly interlaced stripes, alternating between two or three phases of a depicted motion or between distinctly different pictures. A little transparent sheet with regular vertical black stripes was glued beneath a window in a cardboard envelope holding the picture card. The card was pulled out and pushed back in to produce the illusion of change or motion.</p>
                    <b-col>
                        <b-img thumbnail src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/0e/Postcard-chicago-magic-moving-pictures-nice-19061.jpg/640px-Postcard-chicago-magic-moving-pictures-nice-19061.jpg" class="mt-4"/>
                    </b-col>
                    <br>
                    <li>Ombro-Cinema</li>
                    <p>Ombro-Cinéma toys operated on rotating scrolls of paper with sequences of images printed as interlaced two-frame animations: thin regularly-spaced vertical stripes of one frame of the animation were alternated with stripes of the next frame, alternately hidden by regularly-spaced black vertical stripes on a transparent viewing pane. In some versions the stripes on the viewing pane were disguised as a picket fence. Ombro-Cinema toys had of a wooden or cardboard chassis with a rack and hand-crank for cycling the image scroll across the viewing pane. In some versions a wind-up clockwork mechanism transferred the scroll while operating a music box.</p>
                    <b-img thumbnail src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/22/1921_ombro-cin%C3%A9ma.jpg/1280px-1921_ombro-cin%C3%A9ma.jpg" />
                    <!-- <li>Maurice Bonnet's reliephographie</li> -->
                    <li>Autostereoscopic cinema</li>
                    <p>Autostereoscopy is any method of displaying stereoscopic images (adding binocular perception of 3D depth) without the use of special headgear, glasses, something that affects vision, or anything for eyes on the part of the viewer. Because headgear is not required, it is also called "glasses-free 3D" or "glassesless 3D"</p>
                    <li>Kinegram</li>
                    <p>Visual artist Gianni A. Sarcone has produced animations that he calls kinegrams since 1997. He describes his animations as "optic kinetic media" that "artfully combine the visual effects of moiré patterns with the zoetrope animation technique". Sarcone also created rotating animations that use a transparent disc with radial lines that has to be spun around its center to animate the picture.</p>
                    <li>Scanimation</li>
                    <p>"Scanimation", incorporating sliding striped acetate sheets into book pages or folding cards to produce barrier-grid animations of six phases or more at each page, was produced by Rufus Butler Seder starting in 2007.</p>
                </ul>
            </b-col>
        </b-row>
        <b-row>
            <p></p>
        </b-row>
        <b-row>
            <h2>Methods</h2>
        </b-row>
        <b-row>
            <b-col>
            <p>The process of creating this ilussion can be splited in the next steps:</p>
            <ol>
                <li>Decide what to animate. It may be an abstract pattern, a cartoon, or a <u>sequence of photos</u>. Here are some hints about which kind of images work best.</li>
                <ul>
                    <li>It's best to use bright, bold, high-contrast images with no small details. This is because only thin slivers of the image are visible through the striped overlay.</li>
                    <li>It's best if the animation is cyclic, beginning and ending at the same position.</li>
                    <li>It's best if the animation makes sense both forward and backward as you move the overlay back and forth.</li>
                    <li>It's best if no part of the image moves too much between frames.</li>
                    <li>The easiest animations are made of rigid shapes that merely move, rotate, expand/contract, or change colors.</li>
                </ul>
                <li>Set the parameters.</li>
                <ul>
                    <li>Decide on the animation cycle length.</li>
                    <li>Decide on the grid unit size.</li>
                    <li>Decide on the overall size of the images.</li>
                    <li>Decide whether the stripes will be horizontal or vertical.</li>
                </ul>
                <li>Make the animation. Make one picture for each frame of the animation. For example, if you want an animation of a spoked wheel turning, make pictures of the wheel at different angles for each frame. If you want an animation of an animal running, make pictures of the animal at different points in its stride.</li>
                <li>Interlace the frames, it can be made using a software like p5.js</li>
                <li>View the kinegram by moving the overlay over the generated picture.</li>
            </ol>
            </b-col>
        </b-row>
        <b-row>
            <h2>Code and Results</h2>
        </b-row>
        <b-row>
            <SketchP5 :sketch="sketch" class="mt-4" :width="960" :heigth="620"/>
        </b-row>
        <div>
            <code-highlight language="javascript">
                <pre>
                    /**
                    * Application of Scanimation visual illusion using p5.js
                    * @param {p5} p5 reference 
                    */

                    const sketch = (p5) => {
                        let canvas;
                        let input;
                        let button;
                        let clear;
                        let check;
                        let image;
                        let frames = [];
                        let x = 0;

                        p5.setup = () => {
                            canvas = p5.createCanvas(960, 540);
                            canvas.parent("vue-canvas");

                            input = p5.createFileInput(handleFileLoad, true);
                            input.parent("vue-canvas");

                            button = p5.createButton('Generate');
                            button.parent("vue-canvas");
                            button.mousePressed(handleGenerateButtonClick);

                            clear = p5.createButton('Clear');
                            clear.parent("vue-canvas");
                            clear.mousePressed(handleClearButtonClick);

                            check = p5.createCheckbox('Overlay', false);
                            check.parent("vue-canvas");
                            check.changed(handleChangeCheckbox);

                            p5.background("#1e1e1e");
                        }

                        p5.draw = () => {
                            if(check.checked()){
                                x = (x + 2) % (2 * frames.length);
                                drawGeneratedImage();
                                p5.fill(p5.color(0));
                                for (let i = - 2 * frames.length; i &lt;= image.width; i += 2 * frames.length) {
                                    p5.rect(i + x, 0, 2 * (frames.length - 1), image.height);
                                }
                            }
                        }

                        const handleFileLoad = (file) => {
                            if (file.type === 'image') {
                                frames.push(p5.loadImage(file.data));
                            }
                        }

                        const handleGenerateButtonClick = () => {
                            if(frames.length > 0){
                                drawGeneratedImage();
                            }
                        }

                        const handleClearButtonClick = () => {
                            p5.background("#1e1e1e");
                            frames = [];
                        }

                        const handleChangeCheckbox = () => {
                            if(!check.checked()){
                                drawGeneratedImage();  
                            }
                        }

                        const drawGeneratedImage = () => {
                            image = p5.createImage(960, 540);
                            for (let i = 0; i &lt;= image.width; i += 2) {
                                image.set(i, 0, frames[i / 2 % frames.length].get(i, 0, 2, image.height));
                            }
                            p5.image(image, 0, 0);
                        }
                    }

                    export default sketch;
                </pre>
            </code-highlight>
        </div>
        <b-row>
            <h2>Discussion</h2>
        </b-row>
        <b-row>
            <p>To improve the current implementation of scanimation, we can use as input a video, We can take some frames of it to generate the scanimation picture. Also we can construct the overlay in vertical way, not only horizontal.</p>
        </b-row>
        <b-row>
            <h2>Conclusion</h2>
        </b-row>
        <b-row>
            <p>Scanimation is a good way to create simple animations using static images, the film industry had started using this principle of create the first movies, the praxinoscope has used blinking light to simulate the scanimation overlay and an a sequence of frames.</p>
        </b-row>
    </b-container>
</template>

<script>
    import Scanimation from '../sketches/scanimation.p5.js';

    import SketchP5 from '../components/SketchP5.vue';

    import CodeHighlight from "vue-code-highlight/src/CodeHighlight.vue";
    import "vue-code-highlight/themes/duotone-sea.css";
    import "vue-code-highlight/themes/window.css";

    export default {
        name: "VisualIllusion",
        components: {
            SketchP5,
            CodeHighlight
        },
        data(){
            return {
                sketch: Scanimation
            }
        }
    };
</script>

<style scoped>
    p, li {
        font-size: 1.25rem;
    }    
    h1 {
        font-size: 4rem;
    }
</style>